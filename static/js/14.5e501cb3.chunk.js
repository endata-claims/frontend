(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[14,57],{282:function(e,n,a){"use strict";var i=a(7),t=a(0),l=a.n(t),o=a(759),r=a(1259),d=a(196),u=a(1269),s=a(1270),c=a(1271),v=a(1272),m=a(1273),p=a(1274),g=a(131),b=a(348),f=function(e){var n,a=e.columns,i=e.data,t=e.totalCount,o=e.onRowClick,g=e.onScroll,f=e.renderRowSubComponent,E=y({}),h=l.a.useMemo((function(){return null===a||void 0===a?void 0:a.filter((function(e){return!1===e.show})).map((function(e){var n=e.accessor,a=e.id;return a||n}))}),[a]),C=Object(b.b)({columns:a,data:i,initialState:{hiddenColumns:h}},b.a),I=C.getTableProps,O=C.getTableBodyProps,j=C.headerGroups,N=C.rows,w=C.prepareRow,M=C.columns;return l.a.createElement(l.a.Fragment,null,t&&0!==t?l.a.createElement(r.a,{variant:"subtitle1"},"Found ",t):null,l.a.createElement(d.a,{className:E.paper},l.a.createElement(u.a,{className:E.tableContainer,onScroll:g},l.a.createElement(s.a,Object.assign({stickyHeader:!0},I()),l.a.createElement(c.a,null,j.map((function(e){return l.a.createElement(v.a,e.getHeaderGroupProps(),e.headers.map((function(e){return l.a.createElement(m.a,Object.assign({},e.getHeaderProps(),{className:E.tableHeaderCell}),e.render("Header"))})))}))),l.a.createElement(p.a,O(),N.length?N.map((function(e){w(e);var n=e.isExpanded;return l.a.createElement(l.a.Fragment,{key:e.id},l.a.createElement(v.a,Object.assign({onClick:o?function(){return o(e)}:function(){},className:E.tableRow},e.getRowProps()),e.cells.map((function(e){return l.a.createElement(m.a,Object.assign({},e.getCellProps(),{className:E.tableBodyCell}),void 0!==e.value?e.render("Cell"):"-")}))),n&&l.a.createElement(v.a,null,l.a.createElement(m.a,{colSpan:M.length},f({row:e}))))})):l.a.createElement(v.a,null,l.a.createElement(m.a,{colSpan:null!==(n=null===M||void 0===M?void 0:M.length)&&void 0!==n?n:4},"No item found")))))))};n.a=function(e){var n=e.loading,a=e.loadingMore,t=e.data,r=Object(i.a)(e,["loading","loadingMore","data"]),d=y({}),u=l.a.useMemo((function(){return l.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement(o.a,null))}),[]);return n?l.a.createElement("div",{className:d.container},u):t?l.a.createElement("div",{className:d.container},a?l.a.createElement("div",{style:{position:"absolute",top:33,bottom:0,left:0,right:0,zIndex:10,background:"rgba(255, 255, 255, 0.5)"}},u):null,l.a.createElement(f,Object.assign({},r,{data:t}))):null};var y=Object(g.a)((function(e){return{container:{position:"relative",height:"calc(100% - 28px)",padding:2},paper:{height:"100%"},tableContainer:{maxHeight:"100%"},tableHeaderCell:{background:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(.5),textAlign:"center",minWidth:150},tableBodyCell:{textAlign:"center",padding:e.spacing(1)},tableRow:{"&:nth-child(even)":{background:e.palette.grey[100]},"&:hover":{background:e.palette.grey[300]},flexWrap:"nowrap"}}}))},365:function(e,n,a){"use strict";var i=a(7),t=a(0),l=a.n(t),o=a(759),r=a(196),d=a(1260),u=a(381);n.a=function(e){var n=e.loading,a=e.actions,t=e.body,s=Object(u.b)().nextStep;return n?l.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement(o.a,null)):l.a.createElement("div",{className:"tab-layout",style:{height:"100%",marginTop:8}},l.a.createElement(r.a,{style:{padding:8,display:"flex",marginBottom:4}},l.a.createElement(d.a,{variant:"outlined",color:"primary",size:"large",onClick:s.open},"Next Step"),l.a.createElement("div",{style:{flexGrow:1}}),a.map((function(e,n){var a=e.label,t=e.unMountOn,o=Object(i.a)(e,["label","unMountOn"]);return t?null:l.a.createElement(d.a,Object.assign({key:n,style:{marginRight:8},size:"large",color:"primary",variant:"outlined"},o),a)}))),t)}},415:function(e,n,a){"use strict";a.r(n);var i=a(25),t=a(0),l=a.n(t),o=a(282),r=a(16),d=a(256);function u(){var e=Object(i.a)(["\n  fragment JobNoteListFragment on ClaimNote {\n    portfolioType\n    logDate\n    private\n    _privacy @client\n    message\n    user {\n      userName\n      company { companyName }\n    }\n  }\n"]);return u=function(){return e},e}Object(r.a)(u());n.default=function(e){var n,a,i=e.data,t=e.loading,r=l.a.useMemo((function(){return[{Header:"Date",accessor:"logDate",Cell:function(e){var n=e.cell.row.original;return l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(d.a,{portfolio:n.portfolioType}),n.logDate)}},{Header:"Company",accessor:"user.company.companyName"},{Header:"User",accessor:"user.userName"},{Header:"Privacy",accessor:"_privacy"},{Header:"Note",accessor:"message"}]}),[]),u=null===i||void 0===i?void 0:null===(n=i.claimNotes)||void 0===n?void 0:null===(a=n.edges)||void 0===a?void 0:a.map((function(e){return null===e||void 0===e?void 0:e.node}));return l.a.createElement(o.a,{loading:t,columns:r,data:u})}},437:function(e,n,a){"use strict";a.r(n);var i=a(219),t=a(25),l=a(0),o=a.n(l),r=a(761),d=a(488),u=a(250),s=function(e){var n,a=e.setPortfolio,i=Object(u.b)(),t=null===i||void 0===i?void 0:null===(n=i.claim)||void 0===n?void 0:n._portfolios;return t?o.a.createElement(c,{portfolios:t,setPortfolio:a}):null},c=function(e){var n=e.portfolios,a=e.setPortfolio,t=o.a.useState(n[0]),l=Object(i.a)(t,2),r=l[0],u=l[1];return o.a.useEffect((function(){a(r)}),[r,a]),o.a.createElement(d.a,{portfolios:n,value:r,setValue:u})},v=a(16),m=a(242),p=a(415),g=a(365);function b(){var e=Object(t.a)(["\n  query JobNotes($where: ClaimItemFilter, $first: Int, $after: String) {\n    claimNotes(where: $where, first: $first, after: $after) {\n      edges {\n        node {\n          id\n          ...JobNoteListFragment\n        }\n      }\n    }\n  }\n  fragment JobNotesFragment on ClaimJob {\n    actions {\n      actionType\n      name\n      isDisplay\n      isDisabled\n    }\n    building {\n      progress { initialCallMade appointmentBooked }\n      claimStatus { statusId }\n      jobSuppliers { quote { id }}\n    }\n    restoration {\n      progress { initialCallMade appointmentBooked }\n      claimStatus { statusId }\n      jobSuppliers { quote { id }}\n    }\n  }\n"]);return b=function(){return e},e}Object(v.a)(b());n.default=function(e){var n=e.claimId,a=e.data,t=Object(u.b)(),l=o.a.useState(),d=Object(i.a)(l,2),c=d[0],v=d[1],b=!n||!c,y=Object(m.A)({variables:{first:1e3,after:null,where:{claimId:n,portfolios:[c]}},skip:b}),E=y.data,h=y.loading,C=f({claimMeta:t,claim:a}),I=C.isDisabledInitialCall,O=C.isDisplayInitialCall,j=C.isDisplayApointmentMade,N=C.isDisplayChangeAppointment,w=C.awaitingInfoAction;return o.a.createElement(g.a,{actions:[{label:"Initial Call Made",disabled:I,unMountOn:!O},{label:"Appointment Made",unMountOn:!j},{label:"Change Appointment",unMountOn:!N},{label:null===w||void 0===w?void 0:w.name,disabled:null===w||void 0===w?void 0:w.isDisabled,unMountOn:!(null===w||void 0===w?void 0:w.isDisplay)},{label:"New Job Note"}],body:o.a.createElement(r.a,{container:!0,spacing:1,style:{marginTop:4},alignItems:"flex-start"},o.a.createElement(r.a,{item:!0},o.a.createElement(s,{setPortfolio:v})),o.a.createElement(r.a,{item:!0,xs:!0},o.a.createElement(p.default,{data:E,loading:h||b})))})};var f=function(e){var n,a,i,t,l,o,r,d,u,s,c,v,m,p,g,b,f,y,E,h,C,I,O,j,N,w,M,S,J,x,k,D,A,H,T,P,B,F,R,$,q,_,z,G,W,L,V=e.claimMeta,U=e.claim,K="Builder"===(null===V||void 0===V?void 0:null===(n=V.me)||void 0===n?void 0:n.userType),Q="Restorer"===(null===V||void 0===V?void 0:null===(a=V.me)||void 0===a?void 0:a.userType),X=null===U||void 0===U?void 0:null===(i=U.claimJob)||void 0===i?void 0:null===(t=i.building)||void 0===t?void 0:t.jobSuppliers,Y=null===U||void 0===U?void 0:null===(l=U.claimJob)||void 0===l?void 0:null===(o=l.restoration)||void 0===o?void 0:o.jobSuppliers,Z=K&&!(X&&(null===(r=X[0])||void 0===r?void 0:r.quote))||Q&&!(Y&&(null===(d=Y[0])||void 0===d?void 0:d.quote)),ee=K&&!(null===U||void 0===U?void 0:null===(u=U.claimJob)||void 0===u?void 0:null===(s=u.building)||void 0===s?void 0:null===(c=s.progress)||void 0===c?void 0:c.initialCallMade)&&[11,34].includes(null!==(v=null===U||void 0===U?void 0:null===(m=U.claimJob)||void 0===m?void 0:null===(p=m.building)||void 0===p?void 0:null===(g=p.claimStatus)||void 0===g?void 0:g.statusId)&&void 0!==v?v:-1)||Q&&!(null===U||void 0===U?void 0:null===(b=U.claimJob)||void 0===b?void 0:null===(f=b.restoration)||void 0===f?void 0:null===(y=f.progress)||void 0===y?void 0:y.initialCallMade)&&[11,34].includes(null!==(E=null===U||void 0===U?void 0:null===(h=U.claimJob)||void 0===h?void 0:null===(C=h.restoration)||void 0===C?void 0:null===(I=C.claimStatus)||void 0===I?void 0:I.statusId)&&void 0!==E?E:-1),ne=K&&(null===U||void 0===U?void 0:null===(O=U.claimJob)||void 0===O?void 0:null===(j=O.building)||void 0===j?void 0:null===(N=j.progress)||void 0===N?void 0:N.initialCallMade)&&!U.claimJob.building.progress.appointmentBooked||Q&&(null===U||void 0===U?void 0:null===(w=U.claimJob)||void 0===w?void 0:null===(M=w.restoration)||void 0===M?void 0:null===(S=M.progress)||void 0===S?void 0:S.initialCallMade)&&!(null===(J=U.claimJob.restoration)||void 0===J?void 0:J.progress.appointmentBooked),ae=(null===V||void 0===V?void 0:null===(x=V.user)||void 0===x?void 0:null===(k=x.company)||void 0===k?void 0:k.companyId)!==(K?null===U||void 0===U?void 0:null===(D=U.claimJob)||void 0===D?void 0:null===(A=D.building)||void 0===A?void 0:null===(H=A.scopingSupplier)||void 0===H?void 0:H.companyId:Q?null===U||void 0===U?void 0:null===(T=U.claimJob)||void 0===T?void 0:null===(P=T.restoration)||void 0===P?void 0:null===(B=P.scopingSupplier)||void 0===B?void 0:B.companyId:"");return{isDisabledInitialCall:Z,isDisplayInitialCall:ee,isDisplayApointmentMade:ne,isDisplayChangeAppointment:K&&!ae&&[1,37].includes(null!==(F=null===U||void 0===U?void 0:null===(R=U.claimJob)||void 0===R?void 0:null===($=R.building)||void 0===$?void 0:null===(q=$.claimStatus)||void 0===q?void 0:q.statusId)&&void 0!==F?F:-1)||Q&&!ae&&[1,37].includes(null!==(_=null===U||void 0===U?void 0:null===(z=U.claimJob)||void 0===z?void 0:null===(G=z.restoration)||void 0===G?void 0:null===(W=G.claimStatus)||void 0===W?void 0:W.statusId)&&void 0!==_?_:-1),awaitingInfoAction:null===U||void 0===U?void 0:null===(L=U.claimJob)||void 0===L?void 0:L.actions.find((function(e){return"CLAIM_AWAITING_INFO"===(null===e||void 0===e?void 0:e.actionType)}))}}},488:function(e,n,a){"use strict";var i=a(0),t=a.n(i),l=a(196),o=a(1260),r=a(256);n.a=function(e){var n=e.portfolios,a=e.value,i=e.setValue;return t.a.createElement(l.a,{style:{display:"flex",flexDirection:"column",padding:4}},n.map((function(e){return t.a.createElement(o.a,{key:e,style:{margin:0,marginBottom:4,minWidth:50,width:50},variant:a===e?"contained":"text",onClick:function(){return i(e)}},t.a.createElement(r.a,{portfolio:e,style:{margin:0,fontSize:"1.5rem"}}))})))}}}]);
//# sourceMappingURL=14.5e501cb3.chunk.js.map