{"version":3,"sources":["components/Loading/Full.tsx","pages/app/Appbar/RouteGroup.tsx","pages/app/Appbar/SystemMenu.tsx","pages/app/Appbar/CommunicationMenu.tsx","pages/app/Appbar/index.tsx","pages/app/index.tsx"],"names":["style","height","display","justifyContent","alignItems","CircularProgress","margin","RouteGroup","routes","activeRoute","props","classes","useStyles","ButtonGroup","color","variant","size","map","index","label","icon","path","href","Button","key","component","Link","to","startIcon","className","makeStyles","background","SystemMenu","push","useHistory","React","useState","anchorEl","setAnchorEl","handleClose","IconButton","onClick","event","currentTarget","Menu","keepMounted","open","Boolean","onClose","MenuItem","localStorage","clear","gql","CommunicationMenu","useCommunicationmenuQuery","data","loading","disabled","Badge","max","badgeContent","communications","totalCount","PaperProps","minWidth","maxWidth","ListItem","tabIndex","ListItemText","primary","Divider","edges","node","id","claimRef","message","button","handleSeeLink","secondary","padding","marginLeft","initialRoutes","Appbar","logo","companyLogo","accessPaths","pathname","useLocation","filter","route","includes","findIndex","position","Container","Toolbar","minHeight","marginRight","src","alt","location","ACCESS_TOKEN","useAppRootQuery","accessRoutes","useAccessRoutes","appRoutes","currentUser","_appRoutes","rootPath","_rootRoute","useEffect","paths","split","x","length","customisation","_customisation","alias","favicon","rel","type","Suspense","fallback","useMemo","exact","lazy"],"mappings":"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","file":"static/js/48.cfdb363c.chunk.js","sourcesContent":["import React from 'react'\nimport { CircularProgress } from '@material-ui/core'\n\nexport default () => {\n  return (\n    <div style={{ height: '100vh', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n      <CircularProgress style={{ margin: '0 auto', display: 'block' }} />\n    </div>\n  )\n}","import React from 'react'\nimport { makeStyles, Button, ButtonGroup } from '@material-ui/core'\nimport { Link } from 'react-router-dom'\n\nconst RouteGroup = ({ routes, activeRoute, ...props }: any) => {\n  const classes = useStyles()\n\n  return (\n    <ButtonGroup color='inherit' variant='text' size='large' {...props}>\n      {routes.map(({ label, icon, path, href }: any, index: number) => (\n        <Button\n          key={index}\n\n          component={href ? 'a' : Link}\n          href={href}\n          to={path}\n\n          startIcon={icon}\n          color='inherit'\n          className={activeRoute === index ? classes.activeRoute : ''}\n        >\n          {label}\n        </Button>\n      ))}\n    </ButtonGroup>\n  )\n}\n\nexport default RouteGroup\n\nconst useStyles = makeStyles(({\n  activeRoute: {\n    background: 'rgba(0,0,0, 0.3)'\n  }\n}))","import React from 'react'\nimport { IconButton, Menu, MenuItem } from '@material-ui/core'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport { useHistory } from 'react-router-dom'\n\nconst SystemMenu = (props: any) => {\n  const { push } = useHistory()\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const handleClick = (event: any) => setAnchorEl(event.currentTarget)\n  const handleClose = () => setAnchorEl(null)\n\n  const handleLogout = () => {\n    handleClose()\n    localStorage.clear()\n    push('/user/login')\n  }\n\n  return (\n    <>\n      <IconButton onClick={handleClick} color='inherit' {...props}>\n        <MenuIcon />\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem onClick={handleLogout}>Logout</MenuItem>\n      </Menu>\n    </>\n  )\n}\n\nexport default SystemMenu","import React from 'react'\nimport { IconButton, Menu, MenuItem, ListItem, ListItemText, Button, Badge, Divider } from '@material-ui/core'\nimport MailIcon from '@material-ui/icons/Mail'\nimport { useHistory } from 'react-router-dom'\n\nimport gql from 'graphql-tag'\nimport { useCommunicationmenuQuery } from 'generated/graphql'\ngql`\n  query Communicationmenu {\n    communications: claimCommuications(\n      first: 2\n      where: {\n        boxes: Inbox\n        acknowledged: false\n      }\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          claimRef\n          message\n        }\n      }\n    }\n  }\n`\n\nconst CommunicationMenu = (props: any) => {\n  const { push } = useHistory()\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const handleClick = (event: any) => setAnchorEl(event.currentTarget)\n  const handleClose = () => setAnchorEl(null)\n\n  const { data, loading } = useCommunicationmenuQuery()\n\n  const handleSeeMore = () => {\n    handleClose()\n    push('/app/communicationtasks')\n  }\n  const handleSeeLink = (id: any) => {\n    handleClose()\n    push(`/app/claim/${id}/communications`)\n  }\n\n  return (\n    <>\n      <IconButton onClick={handleClick} color='inherit' disabled={loading} {...props}>\n        <Badge color='secondary' max={99} badgeContent={data?.communications?.totalCount}>\n          <MailIcon />\n        </Badge>\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        PaperProps={{\n          style: {\n            minWidth: 200,\n            maxWidth: 350,\n          }\n        }}\n      >\n        <ListItem tabIndex={-1}>\n          <ListItemText primary='Communication Tasks' />\n        </ListItem>\n        <Divider />\n        {data?.communications?.edges?.map(({ node: { id, claimRef, message } }: any) => (\n          <ListItem key={id} component={MenuItem} button onClick={() => handleSeeLink(id)}>\n            <ListItemText\n              primary={claimRef}\n              secondary={message}\n            />\n          </ListItem>\n        ))}\n        <Divider />\n        <ListItem style={{ padding: 16 }}>\n          <ListItemText>\n            Total: {data?.communications?.totalCount}\n          </ListItemText>\n          <Button\n            variant='outlined'\n            color='primary'\n            style={{ marginLeft: 8 }}\n            onClick={handleSeeMore}\n          >\n            See more...\n          </Button>\n        </ListItem>\n      </Menu>\n    </>\n  )\n}\nexport default CommunicationMenu","import React from 'react'\nimport { AppBar as MuiAppBar, Toolbar, Container } from '@material-ui/core'\nimport { useLocation } from 'react-router-dom'\nimport DashboardIcon from '@material-ui/icons/Dashboard'\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit'\nimport InsertChartOutlinedIcon from '@material-ui/icons/InsertChartOutlined'\n\nimport RouteGroup from './RouteGroup'\nimport SystemMenu from './SystemMenu'\nimport CommunicationMenu from './CommunicationMenu'\n\nexport interface AppbarProps {\n  logo?: string | null\n  companyLogo?: string | null\n  accessPaths: string[]\n}\n\nconst initialRoutes = [\n  { label: 'Dashboard', path: '/app/dashboard', icon: <DashboardIcon /> },\n  { label: 'Claims', path: '/app/claims', icon: <VerticalSplitIcon /> },\n  { label: 'Reports', path: '/app/reports', icon: <InsertChartOutlinedIcon />, href: 'https://reports.claims.endataclaims.com/' },\n]\nconst Appbar: React.FC<AppbarProps> = ({ logo, companyLogo, accessPaths }) => {\n  const { pathname } = useLocation()\n  const routes = initialRoutes.filter(route => accessPaths.includes(route.path))\n  const activeRoute = routes.findIndex(route => pathname.includes(route.path))\n\n  return (\n    <MuiAppBar position='sticky'>\n      <Container maxWidth='lg'>\n        <Toolbar style={{ minHeight: 48, height: 48 }}>\n          <div style={{ marginRight: 'auto' }}>\n            {companyLogo && <img src={companyLogo} alt='ENData Claims' style={{ marginRight: 8 }} />}\n            <RouteGroup routes={routes} activeRoute={activeRoute} />\n          </div>\n          <div style={{ marginLeft: 'auto' }}>\n            {accessPaths.includes('/app/communicationtasks') && <CommunicationMenu style={{ marginRight: 8 }} />}\n            <SystemMenu />\n            {logo && <img src={logo} alt='ENData Claims' />}\n          </div>\n        </Toolbar>\n      </Container>\n    </MuiAppBar>\n  )\n}\nexport default Appbar","import React from 'react'\nimport Helmet from 'react-helmet'\nimport { useHistory, Switch, Route } from 'react-router-dom'\nimport Loading from 'components/Loading/Full'\nimport Appbar from './Appbar'\n\nimport { gql } from '@apollo/client'\nimport { useAppRootQuery } from 'generated/graphql'\n\ngql`\n  query AppRoot {\n    currentUser {\n      _appRoutes @client\n      _rootRoute @client\n      _customisation @client {\n        alias\n        favicon\n        logo\n        companyLogo\n      }\n    }\n  }\n`\n\nexport default () => {\n  const { push, location: { pathname } } = useHistory()\n  if (!localStorage.ACCESS_TOKEN) push('/user/login')\n\n  const { data, loading } = useAppRootQuery()\n  const accessRoutes = useAccessRoutes({ appRoutes: data?.currentUser?._appRoutes })\n  const rootPath = data?.currentUser?._rootRoute\n  React.useEffect(() => {\n    const paths = pathname.split('/').filter(x => x)\n    if (rootPath && paths.length < 2) push(rootPath)\n  }, [pathname, rootPath, push])\n\n  const customisation = data?.currentUser?._customisation\n\n  if (loading || !data?.currentUser?._appRoutes) return <Loading />\n\n  return (\n    <>\n      <Helmet>\n        <title>{customisation?.alias}</title>\n        {customisation?.favicon && (\n          <link id='favicon' rel='icon' type='image/x-icon' href={customisation.favicon} />\n        )}\n      </Helmet>\n      <Appbar\n        logo={customisation?.logo}\n        companyLogo={customisation?.companyLogo}\n        accessPaths={data?.currentUser?._appRoutes}\n      />\n      <React.Suspense fallback={null}>\n        <Switch>\n          {accessRoutes && accessRoutes.map((route: any) => <Route key={route.path} {...route} />)}\n        </Switch>\n      </React.Suspense>\n    </>\n  )\n}\n\nconst useAccessRoutes = ({ appRoutes }: any) => {\n  const initialRoutes = React.useMemo(() => [\n    { exact: false, path: '/app/dashboard', component: React.lazy(() => import('./Dashboard')) },\n\n    { exact: false, path: '/app/claims/add', component: React.lazy(() => import('./Claims/ClaimAdd')) },\n    { exact: false, path: '/app/claims/:id', component: React.lazy(() => import('./Claims/ClaimDetails')) },\n    { exact: false, path: '/app/claims', component: React.lazy(() => import('./Claims/ClaimList')) },\n\n    { exact: false, path: '/app/communicationtasks', component: React.lazy(() => import('./Communications')) },\n  ], [])\n\n  const accessRoutes = appRoutes\n    ? initialRoutes.filter(route => Boolean(appRoutes.filter((x: string) => route.path.includes(x)).length))\n    : []\n\n\n  return [\n    ...accessRoutes,\n    { exact: true, path: '*', component: React.lazy(() => import('layouts/NotFound')) }\n  ]\n}"],"sourceRoot":""}